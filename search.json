[{"title":"å¤‡ç”¨åœ°å€","url":"/2025/10/26/å¤‡ç”¨åœ°å€/","content":"\nå¤‡ç”¨åœ°å€ï¼šhttps://blognf-github-io.vercel.app/\n\n\n"},{"title":"å›½å†…è™šæ‹Ÿæœºubuntuä¸­å®‰è£…Dockerå’ŒDocker Compose","url":"/2025/10/25/å›½å†…è™šæ‹Ÿæœºubuntuä¸­å®‰è£…Dockerå’ŒDocker Compose/","content":"\n###### åœ¨æ­¤ä¹‹å‰å¦‚æœæœªæ¥è§¦è¿‡æœåŠ¡å™¨å‘½ä»¤ï¼Œè¯·æŸ¥çœ‹vimçš„ä¿®æ”¹å’Œä¿å­˜å‘½ä»¤ï¼Œæœ¬æ–‡åŸºäºvimè¿›è¡Œä¿®æ”¹æ–‡ä»¶\n\n### ä¸€ã€ğŸ”§ å®‰è£… Docker CE\n\n###### 1ã€æ‰§è¡Œå‘½ä»¤**æ›´æ–°ç³»ç»Ÿå¹¶å®‰è£…å¿…è¦å·¥å…·**\n\n```bash\nsudo apt update\nsudo apt upgrade -y\n```\n\n###### 2ã€ å¦‚æœæŠ¥é”™ï¼ˆæ²¡æœ‰åˆ™ç•¥è¿‡ï¼‰ï¼š\n\n```bash\nroot@ygc:/# sudo apt update\nsudo apt upgrade -y\nHit:1 https://mirrors.aliyun.com/docker-ce/linux/ubuntu jammy InRelease\nHit:2 https://download.docker.com/linux/ubuntu jammy InRelease                                        \nErr:3 http://mirrors.tuna.tsinghua.edu.cn/ubuntu jammy InRelease                    \n  403  Forbidden [IP: 101.6.15.130 80]\nErr:4 http://mirrors.tuna.tsinghua.edu.cn/ubuntu jammy-updates InRelease\n  403  Forbidden [IP: 101.6.15.130 80]\nErr:5 http://mirrors.tuna.tsinghua.edu.cn/ubuntu jammy-backports InRelease\n  403  Forbidden [IP: 101.6.15.130 80]\nErr:6 http://mirrors.tuna.tsinghua.edu.cn/ubuntu jammy-security InRelease\n  403  Forbidden [IP: 101.6.15.130 80]\nReading package lists... Done\nW: https://mirrors.aliyun.com/docker-ce/linux/ubuntu/dists/jammy/InRelease: Key is stored in legacy trusted.gpg keyring (/etc/apt/trusted.gpg), see the DEPRECATION section in apt-key(8) for details.\nN: See apt-secure(8) manpage for repository creation and user configuration details.\nN: Updating from such a repository can't be done securely, and is therefore disabled by default.\nE: The repository 'http://cn.archive.ubuntu.com/ubuntu jammy InRelease' is no longer signed.\nE: Failed to fetch http://cn.archive.ubuntu.com/ubuntu/dists/jammy/InRelease  403  Forbidden [IP: 101.6.15.130 80]\nN: See apt-secure(8) manpage for repository creation and user configuration details.\nN: Updating from such a repository can't be done securely, and is therefore disabled by default.\nE: The repository 'http://cn.archive.ubuntu.com/ubuntu jammy-updates InRelease' is no longer signed.\nE: Failed to fetch http://cn.archive.ubuntu.com/ubuntu/dists/jammy-updates/InRelease  403  Forbidden [IP: 101.6.15.130 80]\nE: Failed to fetch http://cn.archive.ubuntu.com/ubuntu/dists/jammy-backports/InRelease  403  Forbidden [IP: 101.6.15.130 80]\nE: The repository 'http://cn.archive.ubuntu.com/ubuntu jammy-backports InRelease' is no longer signed.\nN: Updating from such a repository can't be done securely, and is therefore disabled by default.\nN: See apt-secure(8) manpage for repository creation and user configuration details.\nE: Failed to fetch http://cn.archive.ubuntu.com/ubuntu/dists/jammy-security/InRelease  403  Forbidden [IP: 101.6.15.130 80]\nE: The repository 'http://cn.archive.ubuntu.com/ubuntu jammy-security InRelease' is no longer signed.\nN: Updating from such a repository can't be done securely, and is therefore disabled by default.\nN: See apt-secure(8) manpage for repository creation and user configuration details.\nReading package lists... Done\nBuilding dependency tree... Done\nReading state information... Done\nCalculating upgrade... Done\n0 upgraded, 0 newly installed, 0 to remove and 0 not upgraded.\n```\n\n###### 3ã€ æŠ¥é”™åæ‰§è¡Œæ¢æº\n\n```ssh\n# å¤‡ä»½å½“å‰æŸåçš„æ–‡ä»¶\nsudo mv /etc/apt/sources.list /etc/apt/sources.list.bak\n\n# é‡æ–°ç”Ÿæˆæ ‡å‡†æºæ–‡ä»¶ï¼ˆä½¿ç”¨é˜¿é‡Œäº‘é•œåƒï¼‰\nsudo tee /etc/apt/sources.list > /dev/null << 'EOF'\ndeb http://mirrors.aliyun.com/ubuntu/ jammy main restricted universe multiverse\ndeb http://mirrors.aliyun.com/ubuntu/ jammy-updates main restricted universe multiverse\ndeb http://mirrors.aliyun.com/ubuntu/ jammy-backports main restricted universe multiverse\ndeb http://mirrors.aliyun.com/ubuntu/ jammy-security main restricted universe multiverse\nEOF\n```\n\n###### 4 ã€å®‰è£…å¿…è¦çš„è½¯ä»¶åŒ…\n\n```bash\nsudo apt install -y apt-transport-https ca-certificates curl software-properties-common\n```\n\n###### 5ã€ æ·»åŠ é˜¿é‡Œäº‘ï¼ˆdockerï¼‰GPGå¯†é’¥ç®¡ç†\n\n```bash\nsudo curl -fsSL https://mirrors.aliyun.com/docker-ce/linux/ubuntu/gpg | sudo apt-key add -\n\n#curl -fsSL https://download.docker.com/linux/ubuntu/gpg | sudo gpg --dearmor -o /usr/share/keyrings/docker-archive-keyring.gpg #dockerçš„å®˜æ–¹GPGå¯†é’¥\n```\n\n###### 6ã€ è¿›å…¥åˆ°/etc/apt/sources.list.dç›®å½•ï¼Œæ·»åŠ è½¯ä»¶æº\n\n```bash\ncd /etc/apt/sources.list.d\n```\n\n###### 7ã€ æ·»åŠ è½¯ä»¶æºï¼šåœ¨/etc/apt/sources.list.dç›®å½•ä¸‹çš„docker.listæ–‡ä»¶ä¸­æ·»åŠ é˜¿é‡Œäº‘çš„é•œåƒä¸‹è½½æºï¼ˆä½¿ç”¨å®˜ç½‘çš„ï¼‰\n\n```bash\nsudo echo \"deb [arch=amd64] https://mirrors.aliyun.com/docker-ce/linux/ubuntu $(lsb_release -cs) stable\" > docker.list\n#sudo echo \"deb [arch=$(dpkg --print-architecture) signed-by=/usr/share/keyrings/docker-archive-keyring.gpg] #https://download.docker.com/linux/ubuntu $(lsb_release -cs) stable\" | sudo tee #/etc/apt/sources.list.d/docker.list > /dev/null\n```\n\n###### 8ã€æ›´æ–°è½¯ä»¶æº\n\n```bash\nsudo apt update\n```\n\n###### 9ã€docker ceå®‰è£…\n\n```bash\nsudo apt install docker-ce docker-ce-cli containerd.io docker-compose-plugin -y\n```\n\n###### 10ã€å¯åŠ¨Dockerå¹¶è®¾ç½®å¼€æœºè‡ªå¯\n\n```bash\nsudo systemctl start docker\nsudo systemctl enable docker\n```\n\n###### 11ã€éªŒè¯å®‰è£…\n\n```bash\nsudo docker run hello-world\n```\n\n###### 12ã€å¦‚æœå‡ºé”™\n\n```bash\nsudo systemctl enable docker\nSynchronizing state of docker.service with SysV service script with /lib/systemd/systemd-sysv-install.\nExecuting: /lib/systemd/systemd-sysv-install enable docker\n```\n\n###### 13ã€æŠ¥é”™è¯·æ¢æºï¼Œé€šå¸¸åœ¨ /etc/docker/daemon.json\n\n```bash\n{\n    \"registry-mirrors\": [\n            \"https://registry.docker-cn.com\",\n             \"https://docker.m.daocloud.io\",           \n             \"https://dockerpull.org\",            \n             \"https://dockerpull.com\"\n    ]\n}\n```\n\n### äºŒã€ğŸ“¦ å®‰è£… Docker Compose\n\n###### 1ã€**ä¸‹è½½Docker ComposeäºŒè¿›åˆ¶æ–‡ä»¶**   ç›´æ¥ä»GitHubå‘å¸ƒé¡µä¸‹è½½ç¨³å®šç‰ˆæœ¬çš„Docker Composeã€‚é‰´äºå›½å†…ç½‘ç»œï¼Œå¦‚æœç›´æ¥ä¸‹è½½è¾ƒæ…¢ï¼Œå¯ä»¥å¤šå°è¯•å‡ æ¬¡ï¼Œæˆ–è€…è€ƒè™‘ä½¿ç”¨ç¬¬ä¸‰æ–¹é•œåƒæºã€‚\n\n```bash\nsudo curl -L \"https://github.com/docker/compose/releases/download/1.29.2/docker-compose-$(uname -s)-$(uname -m)\" -o /usr/local/bin/docker-compose  #æ­¤ç‰ˆæœ¬å¯ä»¥ç›´æ¥ä¸‹è½½ï¼Œç”¨æ›´æ–°çš„ç‰ˆæœ¬æ¨èä½¿ç”¨å›½å†…é•œåƒ\n```\n\nè¯·æ³¨æ„ï¼Œç‰ˆæœ¬å·ï¼ˆæ­¤ä¾‹ä¸­ä¸º2.40.2ï¼‰å¯èƒ½ä¼šæ›´æ–°ã€‚ä½ å¯ä»¥æŸ¥çœ‹Docker Composeçš„[GitHubå‘å¸ƒé¡µ](https://github.com/docker/compose/releases)ä»¥è·å–æœ€æ–°çš„ç¨³å®šç‰ˆæœ¬å·\n\n\n\n### ä¸‰ã€ğŸš€ é…ç½®å›½å†…é•œåƒåŠ é€Ÿå™¨(éœ€è¦è‡ªè¡Œè·å–åŠ é€Ÿå™¨åœ°å€)\n\nä¸ºäº†è¿›ä¸€æ­¥æå‡åç»­æ‹‰å–Dockeré•œåƒçš„é€Ÿåº¦ï¼Œå¼ºçƒˆå»ºè®®ä½ é…ç½®ä¸€ä¸ªå›½å†…é•œåƒåŠ é€Ÿå™¨ã€‚\n\n###### 1ã€ä¿®æ”¹Dockerå®ˆæŠ¤è¿›ç¨‹é…ç½®ï¼Œç¼–è¾‘Dockerçš„é…ç½®æ–‡ä»¶ï¼ˆé€šå¸¸æ˜¯`/etc/docker/daemon.json`ï¼‰ã€‚å¦‚æœæ–‡ä»¶ä¸å­˜åœ¨ï¼Œå¯ä»¥æ–°å»ºä¸€ä¸ªã€‚\n\n```bash\nsudo vim /etc/docker/daemon.json\n```\n\n###### 2ã€ä¾‹å¦‚ï¼Œä½¿ç”¨ä¸­ç§‘å¤§é•œåƒï¼Œé…ç½®æ–‡ä»¶å†…å®¹å¦‚ä¸‹ï¼š\n\n```bash\n{\n  \"registry-mirrors\": [\"https://docker.mirrors.ustc.edu.cn\"]\n}\n```\n\n###### **3ã€é‡å¯DockeræœåŠ¡**  ï¼Œè®©é…ç½®ç”Ÿæ•ˆï¼š\n\n```bash\nsudo systemctl daemon-reload\nsudo systemctl restart docker\n```\n\n###### 4ã€**æˆäºˆæ‰§è¡Œæƒé™**   ä¸‹è½½å®Œæˆåï¼Œéœ€è¦ç»™äºŒè¿›åˆ¶æ–‡ä»¶æ·»åŠ å¯æ‰§è¡Œæƒé™\n\n```bash\nsudo chmod +x /usr/local/bin/docker-compose\n```\n\n###### **5ã€éªŒè¯å®‰è£…** ï¼Œæ£€æŸ¥Docker Composeæ˜¯å¦å®‰è£…æˆåŠŸï¼š\n\n```bash\ndocker-compose --version\n```\n"}]